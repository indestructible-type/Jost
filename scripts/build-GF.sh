#!/bin/sh


set -e


echo "Making Alternative Source Files"
cp -a ../sources ../sources-GF

echo "Fixing Naming Conventions"

#100
sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/100/100.ufo/fontinfo.plist
sed -i 's/Jost 100 Hairline/Jost Hairline/g' ../sources-GF/UFO/100/100.ufo/fontinfo.plist
sed -i 's/Hairline/Thin/g' ../sources-GF/UFO/100/100.ufo/fontinfo.plist

sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/100/100-italic.ufo/fontinfo.plist
sed -i 's/Jost 100 Hairline/Jost Hairline/g' ../sources-GF/UFO/100/100-italic.ufo/fontinfo.plist
sed -i 's/Hairline/Thin/g' ../sources-GF/UFO/100/100-italic.ufo/fontinfo.plist

#200
sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/200/200.ufo/fontinfo.plist
sed -i 's/Jost 200 Thin/Jost Thin/g' ../sources-GF/UFO/200/200.ufo/fontinfo.plist
sed -i 's/Thin/ExtraLight/g' ../sources-GF/UFO/200/200.ufo/fontinfo.plist

sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/200/200-italic.ufo/fontinfo.plist
sed -i 's/Jost 200 Thin/Jost Thin/g' ../sources-GF/UFO/200/200-italic.ufo/fontinfo.plist
sed -i 's/Thin/ExtraLight/g' ../sources-GF/UFO/200/200-italic.ufo/fontinfo.plist

#300
sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/300/300.ufo/fontinfo.plist
sed -i 's/Jost 300 Light/Jost Light/g' ../sources-GF/UFO/300/300.ufo/fontinfo.plist

sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/300/300-italic.ufo/fontinfo.plist
sed -i 's/Jost 300 Light/Jost Light/g' ../sources-GF/UFO/300/300-italic.ufo/fontinfo.plist

#400
sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/400/400.ufo/fontinfo.plist
sed -i 's/Jost 400 Book/Jost Book/g' ../sources-GF/UFO/400/400.ufo/fontinfo.plist
sed -i 's/Book/Regular/g' ../sources-GF/UFO/400/400.ufo/fontinfo.plist

sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/400/400-italic.ufo/fontinfo.plist
sed -i 's/Jost 400 Book/Jost Book/g' ../sources-GF/UFO/400/400-italic.ufo/fontinfo.plist
sed -i 's/Book/Italic/g' ../sources-GF/UFO/400/400-italic.ufo/fontinfo.plist
sed -i 's/ItalicItalic/Italic/g' ../sources-GF/UFO/400/400-italic.ufo/fontinfo.plist
sed -i 's/Italic Italic/Italic/g' ../sources-GF/UFO/400/400-italic.ufo/fontinfo.plist

#500
sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/500/500.ufo/fontinfo.plist
sed -i 's/Jost 500 Medium/Jost Medium/g' ../sources-GF/UFO/500/500.ufo/fontinfo.plist

sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/500/500-italic.ufo/fontinfo.plist
sed -i 's/Jost 500 Medium/Jost Medium/g' ../sources-GF/UFO/500/500-italic.ufo/fontinfo.plist

#600
sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/600/600.ufo/fontinfo.plist
sed -i 's/Jost 600 Semi/Jost Semi/g' ../sources-GF/UFO/600/600.ufo/fontinfo.plist
sed -i 's/Semi/SemiBold/g' ../sources-GF/UFO/600/600.ufo/fontinfo.plist
sed -i 's/SemiBoldBold/SemiBold/g' ../sources-GF/UFO/600/600.ufo/fontinfo.plist

sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/600/600-italic.ufo/fontinfo.plist
sed -i 's/Jost 600 Semi/Jost Semi/g' ../sources-GF/UFO/600/600-italic.ufo/fontinfo.plist
sed -i 's/Semi/SemiBold/g' ../sources-GF/UFO/600/600-italic.ufo/fontinfo.plist
sed -i 's/SemiBoldBold/SemiBold/g' ../sources-GF/UFO/600/600.ufo/fontinfo.plist

#700
sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/700/700.ufo/fontinfo.plist
sed -i 's/Jost 700 Bold/Jost Bold/g' ../sources-GF/UFO/700/700.ufo/fontinfo.plist

sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/700/700-italic.ufo/fontinfo.plist
sed -i 's/Jost 700 Bold/Jost Bold/g' ../sources-GF/UFO/700/700-italic.ufo/fontinfo.plist

#800
sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/800/800.ufo/fontinfo.plist
sed -i 's/Jost 800 Heavy/Jost Heavy/g' ../sources-GF/UFO/800/800.ufo/fontinfo.plist
sed -i 's/Heavy/ExtraBold/g' ../sources-GF/UFO/800/800.ufo/fontinfo.plist

sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/800/800-italic.ufo/fontinfo.plist
sed -i 's/Jost 800 Heavy/Jost Heavy/g' ../sources-GF/UFO/800/800-italic.ufo/fontinfo.plist
sed -i 's/Heavy/ExtraBold/g' ../sources-GF/UFO/800/800-italic.ufo/fontinfo.plist

#900
sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/900/900.ufo/fontinfo.plist
sed -i 's/Jost 900 Black/Jost Black/g' ../sources-GF/UFO/900/900.ufo/fontinfo.plist

sed -i 's/Jost\*/Jost/g' ../sources-GF/UFO/900/900-italic.ufo/fontinfo.plist
sed -i 's/Jost 900 Black/Jost Black/g' ../sources-GF/UFO/900/900-italic.ufo/fontinfo.plist


echo "Generating Variable Font"
fontmake -o variable -m ../sources-GF/jost.designspace --output-path ../fonts/Jost[ital,wght].ttf

echo "Generating TrueType Fonts"
fontmake  -o ttf --output-dir ../fonts/ttf2/ -u ../sources-GF/UFO/100/100.ufo ../sources-GF/UFO/100/100-italic.ufo ../sources-GF/UFO/200/200.ufo ../sources-GF/UFO/200/200-italic.ufo ../sources-GF/UFO/300/300.ufo ../sources-GF/UFO/300/300-italic.ufo ../sources-GF/UFO/400/400.ufo ../sources-GF/UFO/400/400-italic.ufo ../sources-GF/UFO/500/500.ufo ../sources-GF/UFO/500/500-italic.ufo ../sources-GF/UFO/600/600.ufo ../sources-GF/UFO/600/600-italic.ufo ../sources-GF/UFO/700/700.ufo ../sources-GF/UFO/700/700-italic.ufo ../sources-GF/UFO/800/800.ufo ../sources-GF/UFO/800/800-italic.ufo ../sources-GF/UFO/900/900.ufo ../sources-GF/UFO/900/900-italic.ufo

echo "Hot Fixes"
gftools fix-dsig -f ../fonts/ttf2/*.ttf

mkdir -p ../fonts/ttf

ttfautohint -n ../fonts/ttf2/100.ttf ../fonts/ttf/Jost-Thin.ttf
ttfautohint -n ../fonts/ttf2/100-italic.ttf ../fonts/ttf/Jost-ThinItalic.ttf
ttfautohint -n ../fonts/ttf2/200.ttf ../fonts/ttf/Jost-ExtraLight.ttf
ttfautohint -n ../fonts/ttf2/200-italic.ttf ../fonts/ttf/Jost-ExtraLightItalic.ttf
ttfautohint -n ../fonts/ttf2/300.ttf ../fonts/ttf/Jost-Light.ttf
ttfautohint -n ../fonts/ttf2/300-italic.ttf ../fonts/ttf/Jost-LightItalic.ttf
ttfautohint -n ../fonts/ttf2/400.ttf ../fonts/ttf/Jost-Regular.ttf
ttfautohint -n ../fonts/ttf2/400-italic.ttf ../fonts/ttf/Jost-RegularItalic.ttf
ttfautohint -n ../fonts/ttf2/500.ttf ../fonts/ttf/Jost-Medium.ttf
ttfautohint -n ../fonts/ttf2/500-italic.ttf ../fonts/ttf/Jost-MediumItalic.ttf
ttfautohint -n ../fonts/ttf2/600.ttf ../fonts/ttf/Jost-SemiBold.ttf
ttfautohint -n ../fonts/ttf2/600-italic.ttf ../fonts/ttf/Jost-SemiBoldItalic.ttf
ttfautohint -n ../fonts/ttf2/700.ttf ../fonts/ttf/Jost-Bold.ttf
ttfautohint -n ../fonts/ttf2/700-italic.ttf ../fonts/ttf/Jost-BoldItalic.ttf
ttfautohint -n ../fonts/ttf2/800.ttf ../fonts/ttf/Jost-ExtraBold.ttf
ttfautohint -n ../fonts/ttf2/800-italic.ttf ../fonts/ttf/Jost-ExtraBoldItalic.ttf
ttfautohint -n ../fonts/ttf2/900.ttf ../fonts/ttf/Jost-Black.ttf
ttfautohint -n ../fonts/ttf2/900-italic.ttf ../fonts/ttf/Jost-BlackItalic.ttf

gftools fix-hinting ../fonts/ttf/Jost-Thin.ttf
gftools fix-hinting ../fonts/ttf/Jost-ThinItalic.ttf
gftools fix-hinting ../fonts/ttf/Jost-ExtraLight.ttf
gftools fix-hinting ../fonts/ttf/Jost-ExtraLightItalic.ttf
gftools fix-hinting ../fonts/ttf/Jost-Light.ttf
gftools fix-hinting ../fonts/ttf/Jost-LightItalic.ttf
gftools fix-hinting ../fonts/ttf/Jost-Regular.ttf
gftools fix-hinting ../fonts/ttf/Jost-RegularItalic.ttf
gftools fix-hinting ../fonts/ttf/Jost-Medium.ttf
gftools fix-hinting ../fonts/ttf/Jost-MediumItalic.ttf
gftools fix-hinting ../fonts/ttf/Jost-SemiBold.ttf
gftools fix-hinting ../fonts/ttf/Jost-SemiBoldItalic.ttf
gftools fix-hinting ../fonts/ttf/Jost-Bold.ttf
gftools fix-hinting ../fonts/ttf/Jost-BoldItalic.ttf
gftools fix-hinting ../fonts/ttf/Jost-ExtraBold.ttf
gftools fix-hinting ../fonts/ttf/Jost-ExtraBoldItalic.ttf
gftools fix-hinting ../fonts/ttf/Jost-Black.ttf
gftools fix-hinting ../fonts/ttf/Jost-BlackItalic.ttf

echo "Cleaning Directory Up"
rm ../fonts/ttf/*.ttf

mv ../fonts/ttf/Jost-Thin.ttf.fix ../fonts/ttf/Jost-Thin.ttf
mv ../fonts/ttf/Jost-ThinItalic.ttf.fix ../fonts/ttf/Jost-ThinItalic.ttf
mv ../fonts/ttf/Jost-ExtraLight.ttf.fix ../fonts/ttf/Jost-ExtraLight.ttf
mv ../fonts/ttf/Jost-ExtraLightItalic.ttf.fix ../fonts/ttf/Jost-ExtraLightItalic.ttf
mv ../fonts/ttf/Jost-Light.ttf.fix ../fonts/ttf/Jost-Light.ttf
mv ../fonts/ttf/Jost-LightItalic.ttf.fix ../fonts/ttf/Jost-LightItalic.ttf
mv ../fonts/ttf/Jost-Regular.ttf.fix ../fonts/ttf/Jost-Regular.ttf
mv ../fonts/ttf/Jost-RegularItalic.ttf.fix ../fonts/ttf/Jost-Italic.ttf
mv ../fonts/ttf/Jost-Medium.ttf.fix ../fonts/ttf/Jost-Medium.ttf
mv ../fonts/ttf/Jost-MediumItalic.ttf.fix ../fonts/ttf/Jost-MediumItalic.ttf
mv ../fonts/ttf/Jost-SemiBold.ttf.fix ../fonts/ttf/Jost-SemiBold.ttf
mv ../fonts/ttf/Jost-SemiBoldItalic.ttf.fix ../fonts/ttf/Jost-SemiBoldItalic.ttf
mv ../fonts/ttf/Jost-Bold.ttf.fix ../fonts/ttf/Jost-Bold.ttf
mv ../fonts/ttf/Jost-BoldItalic.ttf.fix ../fonts/ttf/Jost-BoldItalic.ttf
mv ../fonts/ttf/Jost-ExtraBold.ttf.fix ../fonts/ttf/Jost-ExtraBold.ttf
mv ../fonts/ttf/Jost-ExtraBoldItalic.ttf.fix ../fonts/ttf/Jost-ExtraBoldItalic.ttf
mv ../fonts/ttf/Jost-Black.ttf.fix ../fonts/ttf/Jost-Black.ttf
mv ../fonts/ttf/Jost-BlackItalic.ttf.fix ../fonts/ttf/Jost-BlackItalic.ttf

rm ../fonts/ttf2/*.ttf
rmdir ../fonts/ttf2

echo "Generating OpenType Fonts"
fontmake  -o otf --output-dir ../fonts/otf/ -u ../sources-GF/UFO/100/100.ufo ../sources-GF/UFO/100/100-italic.ufo ../sources-GF/UFO/200/200.ufo ../sources-GF/UFO/200/200-italic.ufo ../sources-GF/UFO/300/300.ufo ../sources-GF/UFO/300/300-italic.ufo ../sources-GF/UFO/400/400.ufo ../sources-GF/UFO/400/400-italic.ufo ../sources-GF/UFO/500/500.ufo ../sources-GF/UFO/500/500-italic.ufo ../sources-GF/UFO/600/600.ufo ../sources-GF/UFO/600/600-italic.ufo ../sources-GF/UFO/700/700.ufo ../sources-GF/UFO/700/700-italic.ufo ../sources-GF/UFO/800/800.ufo ../sources-GF/UFO/800/800-italic.ufo ../sources-GF/UFO/900/900.ufo ../sources-GF/UFO/900/900-italic.ufo

echo "Hot Fixes"
mv ../fonts/otf/100.otf ../fonts/otf/Jost-Thin.otf
mv ../fonts/otf/100-italic.otf ../fonts/otf/Jost-ThinItalic.otf
mv ../fonts/otf/200.otf ../fonts/otf/Jost-ExtraLight.otf
mv ../fonts/otf/200-italic.otf ../fonts/otf/Jost-ExtraLightItalic.otf
mv ../fonts/otf/300.otf ../fonts/otf/Jost-Light.otf
mv ../fonts/otf/300-italic.otf ../fonts/otf/Jost-LightItalic.otf
mv ../fonts/otf/400.otf ../fonts/otf/Jost-Regular.otf
mv ../fonts/otf/400-italic.otf ../fonts/otf/Jost-RegularItalic.otf
mv ../fonts/otf/500.otf ../fonts/otf/Jost-Medium.otf
mv ../fonts/otf/500-italic.otf ../fonts/otf/Jost-MediumItalic.otf
mv ../fonts/otf/600.otf ../fonts/otf/Jost-SemiBold.otf
mv ../fonts/otf/600-italic.otf ../fonts/otf/Jost-SemiBoldItalic.otf
mv ../fonts/otf/700.otf ../fonts/otf/Jost-Bold.otf
mv ../fonts/otf/700-italic.otf ../fonts/otf/Jost-BoldItalic.otf
mv ../fonts/otf/800.otf ../fonts/otf/Jost-ExtraBold.otf
mv ../fonts/otf/800-italic.otf ../fonts/otf/Jost-ExtraBoldItalic.otf
mv ../fonts/otf/900.otf ../fonts/otf/Jost-Black.otf
mv ../fonts/otf/900-italic.otf ../fonts/otf/Jost-BlackItalic.otf

echo "Cleaning Up"
rm -rf ../sources-GF

echo "All Done!"
